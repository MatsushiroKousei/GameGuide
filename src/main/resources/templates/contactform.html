<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<!-- 共通headで置き換える タイトルは()内に第一引数-->
<head th:replace="common :: meta_header('ゲーム攻略記事/TOP',~{::link},~{::script})">
    <!-- (2)このページ固有で読み込むCSS/JS -->
    <!--  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>-->
<!--    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>-->
    <!--    <link rel="stylesheet" th:href="@{/css/mainstyle.css}" />-->
    <!--    <script></script>-->
</head>

<body>
<div class="wrapper">

    <!--↓共通headerの呼び出し-->
    <div th:replace="common :: header"></div>

    <div class="container">
        <div class="contact_form">
            <h2>お問い合わせ</h2>
            <!--    <div class="center_wrap">-->
            <div class="input_form">
                <p>※以下を入力して送信ボタンをクリックしてください。</p>
                <form name="contactform" id="contactform" role="form">
                    <div class="form_wrap">
                        <label for="inputName" class="form_input">お名前</label>
                        <div class="form_item">
                            <input type="text" class="form-control" name="name" placeholder="お名前" value="">
                        </div>
                    </div>
                    <div class="form_wrap">
                        <label for="inputEmail" class="form_input">メールアドレス</label>
                        <div class="form_item">
                            <input type="email" class="form-control" name="email" placeholder="メールアドレス" value="">
                        </div>
                    </div>
                    <div class="form_wrap">
                        <label for="inputMessage" class="form_input">お問い合わせ内容</label>
                        <div class="form_item">
                                <textarea class="form-control" name="message" rows="5" placeholder="お問い合わせはこちら"></textarea>
                        </div>
                    </div>
                    <div class="form_wrap">
                        <button type="submit" name="btnSubmit" class="" id="btnSend">送信する</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!--  </div>-->

</div>
<div class="up_top"><a href="#"><i class="fa-solid fa-arrow-up-from-bracket fa-stack-2x"></i></a></div>

<!--共通headの呼び出し-->
<div th:replace="common :: footer"></div>
<script type="text/javascript">
        $(document).ready(function () {
            $('#btnSend').click(function () {
                $("#btnSend").prop("disabled", true);
                // フォームのデータをJSONに変換
                var rawData = $('#contactform').serializeArray();
                var data = {};
                jQuery.each(rawData, function (i, e) {
                    data[e.name] = e.value;
                });
                // Ajaxを使ってメールを送信
                $.ajax({
                    type: "POST",
                    url: "./sendmail",
                    dataType: "json",
                    data: JSON.stringify(data),
                    contentType: 'application/json',
                    scriptCharset: 'utf-8',
                    success: function (outdata, dataType) {
                        if (outdata[0] == "OK") alert("メール送信しました");
                        $("#btnSend").prop("disabled", false);
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        alert("Error : " + errorThrown);
                        $("#btnSend").prop("disabled", false);
                    }
                });
            });
        });
    </script>
</body>

</html>